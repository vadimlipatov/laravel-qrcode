import{m as $,o as c,f as d,b as e,F as b,p as k,t as r,u as i,r as m,q as C,j as B,k as x,a as _,w as v,Z as E,c as I,g as N,s as S}from"./app-ee64e58f.js";import{_ as V}from"./AuthenticatedLayout-f4d358b7.js";import{S as j}from"./Spinner-74ae4ada.js";import{_ as q}from"./InputLabel-6635566f.js";import"./ApplicationLogo-62067a0c.js";import"./_plugin-vue_export-helper-c27b6911.js";const T={class:"w-full p-4 mx-auto text-center"},D=e("h1",{class:"text-lg mb-4"},"Участники",-1),L={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},F={class:"w-full text-sm text-left text-gray-500"},R=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Идентификатор"),e("th",{scope:"col",class:"px-6 py-3"},"Имя"),e("th",{scope:"col",class:"px-6 py-3"},"Фамилия"),e("th",{scope:"col",class:"px-6 py-3"},"Дата/время регистрации"),e("th",{scope:"col",class:"px-6 py-3"},"Печать")])],-1),A={key:0},M={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},Q={class:"px-6 py-4"},Z={class:"px-6 py-4"},z={class:"px-6 py-4"},G={class:"px-6 py-4"},H=["onClick"],J={key:1},K=e("p",{class:"text-center p-2"},"Нет данных..",-1),O=[K],P={__name:"Table",props:{contacts:{type:Array}},setup(g){let{printCertificate:s}=$("printCertificate");return(l,h)=>(c(),d("div",T,[D,e("div",L,[e("table",F,[R,g.contacts.length?(c(),d("tbody",A,[(c(!0),d(b,null,k(g.contacts,o=>(c(),d("tr",{key:o.id,class:"bg-white border-b hover:bg-gray-50"},[e("th",M,r(o.item_id),1),e("td",Q,r(o.name),1),e("td",Z,r(o.last_name),1),e("td",z,r(o.created_at),1),e("td",G,[e("button",{onClick:u=>i(s)(o),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Печать ",8,H)])]))),128))])):(c(),d("tbody",J,O))])])]))}},U=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight text-center"}," QR Code ",-1),W={class:"py-12"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex justify-between"},ee={class:"p-6 w-60 text-gray-900 flex items-center justify-center"},te=e("video",{id:"preview"},null,-1),se={class:"flex items-center p-6"},oe={class:"",id:"print"},ae={class:"pt-2",id:"btn"},ne={class:"flex items-center p-6"},ie=e("input",{class:"ml-2 w-3/5 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",type:"text",id:"text",name:"text",readonly:""},null,-1),ce={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},re={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg py-8"},ge={__name:"Dashboard",props:{canLogin:{type:Boolean},canRegister:{type:Boolean},laravelVersion:{type:String,required:!0},phpVersion:{type:String,required:!0}},setup(g){let s=m({}),l=m([]),h=m(""),o=m(!0);function u(a){const t=document.getElementById("app"),n=document.createElement("div"),p=document.createElement("p");p.textContent=a.name??"Имя",document.body.before(p),n.append(p);const f=document.createElement("p");f.textContent=a.lastName??"Фамилия",n.append(f);const y=document.createElement("p");y.textContent=a.itemId??"Название билета",n.append(y),document.body.before(n),t.style.visibility="hidden",window.print(),setTimeout(()=>{n.remove(),t.style.visibility="visible"},100)}S("printCertificate",{printCertificate:u}),C(h,a=>{x.get("api/contacts").then(t=>{l.value=t.data})});function w(){let a={name:s.value.name,last_name:s.value.last_name,created_at:s.value.created_at};l.value=[a,...l.value]}return B(()=>{x.get("api/contacts").then(t=>{l.value=t.data});let a=new Instascan.Scanner({video:document.getElementById("preview")});Instascan.Camera.getCameras().then(function(t){t.length>0?(a.start(t[0]),o.value=!1):(alert("No cameras"),o.value=!1)}).catch(function(t){console.error(t)}),a.addListener("scan",function(t){h.value=t;const n=document.getElementById("text").value;document.getElementById("text").value=t,t!==n&&x.post("api/contacts",{itemId:t}).then(p=>{s.value=p.data,w(),u(s.value)})})}),(a,t)=>(c(),d(b,null,[_(i(E),{title:"Dashboard"}),_(V,null,{header:v(()=>[U]),default:v(()=>[e("div",W,[e("div",X,[e("div",Y,[e("div",ee,[i(o)?(c(),I(j,{key:0,style:{position:"absolute"}})):N("",!0),te]),e("div",se,[e("div",oe,[e("p",null,r(i(s).name??"Имя"),1),e("p",null,r(i(s).last_name??"Фамилия"),1),e("p",null,r(i(s).item_id??"Название билета"),1),e("p",ae,[e("button",{onClick:t[0]||(t[0]=n=>u(i(s))),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Печать ")])])]),e("div",ne,[_(q,{value:"Scanner"}),ie])])])]),e("div",ce,[e("div",re,[_(P,{contacts:i(l)},null,8,["contacts"])])])]),_:1})],64))}};export{ge as default};
